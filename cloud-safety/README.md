## 通信和安全



安全总是很重要的，各个语言对于通用的加密算法都会有实现。

公钥与私钥是用于加密与解密，而加签与验签是用来证明身份，以免被篡改的。

## 基础回顾

### 1. 加密的发展

#### 1.1 对称加密

对称密钥加密，又称私钥加密，即信息的发送方和接收方用一个密钥去加密和解密数据。它的最大优势是加/解密速度快，适合于对大数据量进行加密，但密钥管理困难。

采用单钥密码系统的加密方法，同一个密钥可以同时用作信息的加密和解密，这种加密方法称为对称加密，也称为单密钥加密。需要对加密和解密使用相同密钥的加密算法。由于其速度，对称性加密通常在消息发送方需要加密大量数据时使用。对称性加密也称为密钥加密。所谓对称，就是采用这种加密方法的双方使用方式用同样的密钥进行加密和解密。密钥实际上是一种算法，通信发送方使用这种算法加密数据，接收方再以同样的算法解密数据。因此对称式加密本身不是安全的。

对于普通的对称密码学，加密运算与解密运算使用同样的密钥。通常,使用的对称加密算法比较简便高效，密钥简短，破译极其困难，由于系统的保密性主要取决于密钥的安全性，所以，在公开的计算机网络上安全地传送和保管密钥是一个严峻的问题。正是由于对称密码学中双方都使用相同的密钥，因此无法实现数据签名和不可否认性等功能。

常用的对称加密有：

DES、 IDEA、 RC2、 RC4、 SKIPJACK、 RC5、 AES 算法等采用单钥密码系统的加密方法，同一个密钥可以同时用作信息的加密和解密，这种加密方法称为对称加密，也称为单密钥加密。

#### 1.2 非对称加密

1976 年，美国学者 Dime 和 Henman 为解决信息公开传送和密钥管理问题，提出一种新的密钥交换协议，允许在不安全的媒体上的通讯双方交换信息，安全地达成一致的密钥，这就是“公开密钥系统”。相对于“对称加密算法”这种方法也叫做“非对称加密算法”。与对称加密算法不同，非对称加密算法需要两个密钥：公开密钥（ publickey）和私有密钥（ privatekey）。公开密钥与私有密钥是一对，如果用公开密钥对数据进行加密，只有用对应的私有密钥才能解密；如果用私有密钥对数据进行加密，那么只有用对应的公开密钥才能解密。因为加密和解密使用的是两个不同的密钥，所以这种算法叫作非对称加密算法。

非对称加密算法实现机密信息交换的基本过程是：甲方生成一对密钥并将其中的一把作为公用密钥向其它方公开；得到该公用密钥的乙方使用该密钥对机密信息进行加密后再发送给甲方；甲方再用自己保存的另一把专用密钥对加密后的信息进行解密。甲方只能用其专用密钥解密由其公用密钥加密后的任何信息。非对称加密算法的保密性比较好，它消除了最终用户交换密钥的需要，但加密和解密花费时间长、速度慢，它不适合于对文件加密而只适用于对少量数据进行加密。经典的非对称加密算法如 RSA 算法等安全性都相当高.非对称加密的典型应用是数字签名。

采用双钥密码系统的加密方法，在一个过程中使用两个密钥，一个用于加密，另一个用于解密，这种加密方法称为非对称加密，也称为公钥加密，因为其中一个密钥是公开的（另一个则需要保密）。

#### 1.3 公钥

公钥是与私钥算法一起使用的密钥对的非秘密一半。公钥通常用于加密会话密钥、验证数字签名，或加密可以用相应的私钥解密的数据。公钥和私钥是通过一种算法得到的一个密钥对(即一个公钥和一个私钥)其中的一个向外界公开，称为公钥；另一个自己保留，称为私钥。通过这种算法得到的密钥对能保证在世界范围内是唯一的。使用这个密钥对的时候，如果用其中一个密钥加密一段数据，必须用另一个密钥解密。比如用公钥加密数据就必须用私钥解密，如果用私钥加密也必须用公钥解密，否则解密将不会成功。

1976 年。当时在美国斯坦福大学的迪菲（ Diffie）和赫尔曼(Hellman)两人提出了公开密钥密码的新思想（论文”New Direction in Cryptography”），不仅加密算法本身可以公开，甚至加密用的密钥也可以公开。但这并不意味着保密程度的降低。因为如果加密密钥和解密密钥不一样。而将解密密钥保密就可以。这就是著名的公钥密码体制。也称作非对称密码体制。不同于对称性的 密码学， 在于其加密钥匙只适用于单一用户。

#### 1.4 钥匙的两部分

一把私有的钥匙，仅有用户才拥有。一把公开的钥匙，可公开发行配送，只要有要求即取得。每支钥匙产生一个被使用来改变属性的功能。私有的钥匙产生一个私有改变属性的功能，而公开的钥匙 产生一个 公开改变属性的功能。这些功能是反向相关的，例如，如果一个功能是用来加密消息，另外一个功能则被用来解密消息。不论此改变属性功能的次序为何皆不重要。公开的钥匙系统的优势是两个用户能安全的沟通而不需交换秘密钥匙。例如，假设一个送信者需要传送一个信息给一个收信者，而信息的秘密性是必要的， 送信者以收信者的公开的钥匙来加密，而仅有收信者的私有的钥匙能够对此信息解密。公开的钥匙密码学是非常适合于提供认证，完整和不能否认的服务， 所有的这些服务既是我们所知的数字签名。

#### 1.5 总结

一个有效、可信的 SSL 数字证书包括一个公共密钥和一个私用密钥。公共密钥用于加密信息，私用密钥用于解译加密的信息。因此，浏览器指向一个安全域时，SSL 将同步确认服务器和客户端，并创建一种加密方式和一个唯一的会话密钥。

如果您的网站使用 SSL 证书，您的客户就知道他们的交易安全可靠，并且充分信赖您的网站。数安时代有15年的技术沉淀，技术应用核心行业50多，技术应用业务领域300多处，[SSL证书](https://www.trustauth.cn/)自适应128-256位加密，SHA256签名算法，秘钥长度高达2048-4096位，且一直致力于促进我国信息安全保护的进程。

相关资料

1. [公钥和私钥的解释](https://www.trustauth.cn/news/security-news/27011.html) 

### 2. 签名与验签

通过公私钥机制使用在 **客户接口加签的方式**  为自身应用配置 **公钥** 防止数据篡改，以此来保障商户应用和自身应用交互的安全性。

#### 2.1 名词解释

**公钥：**即 **应用公钥**（public_key），用于加密信息。

**私钥：**即 **应用私钥**（private_key），用于解密信息。

**签名：**即生成签名方 将传送的消息用私钥加密的过程。

**验签：**指验签方 使用公钥对消息进行验证的过程。

#### 2.2 加签和验签原理

商户在应用中使用自己的 **私钥** 对消息加签之后，消息和签名会传递给A国服务，A国服务则使用应用的 **公钥**/**公钥证书** 验证消息的真实性（来自于合法应用的真实消息）。

![公钥机制.png](https://cdn.nlark.com/yuque/0/2021/png/179989/1637654806878-c06d4953-8d83-4c1f-a3b9-6ae8ae108bde.png) 



相关资料

1. [支付宝开放助手 签名与验签](https://opendocs.alipay.com/common/02mse2)  

## 加密算法



## 应用实践

**应用场景** 

- 在与第三方交互时，可以使用 非对称加密+签名算法 避免数据被篡改。



